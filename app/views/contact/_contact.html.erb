<!DOCTYPE html>
<div class="banner banner-beige banner-contact blue">
  <div class="contact-container">
      <div class="contact-info">
          <h1>Contact</h1>
          <div class="contact-details" style="margin:0;">
              <div class="contact-phone">
                  <p>
                      <span style="display: inline-block; margin-right: 10px;">
                          <i class="fa-solid fa-phone" style="color: #070b81;"></i>
                      </span>
                      +33 6 43 83 18 04
                  </p>
              </div>
              <div class="contact-email">
                  <p>
                      <span style="display: inline-block; margin-right: 10px;">
                          <i class="fa-solid fa-envelope" style="color: #070b81;"></i>
                      </span>
                      andre.audibert@amaxan.fr
                  </p>
              </div>
          </div>
      </div>
      <div class="contact-form">
          <form action="/contact" method="post">
            <div class="contact-form-grid-2">
              <div class="form-group">
                  <label for="nom">Nom</label>
                  <input type="text" id="nom" name="nom" required>
              </div>
              <div class="form-group">
                  <label for="mail">Email</label>
                  <input type="email" id="mail" name="mail" required>
              </div>
              <div class="form-group">
                  <label for="telephone">Téléphone</label>
                  <input type="tel" id="telephone" name="telephone" required>
              </div>
              <div class="form-group">
                  <label for="expertise">Expertises</label>
                  <select id="expertise" name="expertise[]" class="form-group" multiple>
                      <option value="famille">Famille</option>
                      <option value="placement">Placement</option>
                      <option value="entrepreneurs">Entrepreneurs</option>
                      <option value="emprunt">Emprunt</option>
                      <option value="assistance">Assistance Administrative</option>
                      <option value="impots">Fiscalité</option>
                  </select>
              </div>
              <div class="form-group" style="grid-column: span 2;"> <!-- Permet au champ de message de prendre toute la largeur -->
                  <label for="message">Message</label>
                  <textarea id="message" name="message" class="wide-input" placeholder="Message" required style="font-weight: lighter;"></textarea>
              </div>
              <div class="button-form-block">
                <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
                <input type="submit" value="ENVOYER" data-wait="Please wait" class="button-form">
              </div>
            </div> <!-- Bouton sous le champ de message -->
        </form>
      </div>
  </div>
</div>

<!-- Inclure jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Inclure le CSS de Select2 -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />

<!-- Inclure le JavaScript de Select2 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>

<script>
$(document).ready(function() {
  // Initialiser Select2 sur l'élément select
  $('#expertise').select2({
    placeholder: 'Sélectionner', // Texte de remplacement
    allowClear: true, // Option de suppression de la sélection
    closeOnSelect: false, // Conserver la boîte déroulante ouverte après la sélection
  });

  // Fonction pour ajuster la hauteur de la boîte de sélection Select2
  function adjustSelect2Height() {
    var select2Container = $('.select2-container--open'); // Obtenir le conteneur Select2
    var select2Results = select2Container.find('.select2-results'); // Obtenir la liste des résultats

    // Calculer la hauteur en fonction du nombre d'éléments sélectionnés
    var selectedItems = $('#expertise').val();
    var height = selectedItems ? selectedItems.length * 30 : 0; // Ajustez 30 à la hauteur souhaitée pour un élément

    // Définir une hauteur minimale et assurez-vous qu'elle n'est pas trop grande
    height = Math.min(300, height); // Hauteur maximale de 300 pixels

    // Appliquer la hauteur à la liste des résultats
    select2Results.css('max-height', height + 'px');
  }

  // Appeler la fonction initialement et à chaque sélection ou désélection d'élément
  adjustSelect2Height();
  $('#expertise').on('change', function() {
    adjustSelect2Height();
  });
});
</script>
